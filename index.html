<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>猫聊下载中心</title>
<link rel="icon" href="cat.jpg" type="image/jpeg">
<link rel="stylesheet" href="https://cdn.jsdmirror.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
<style>
    body{
        margin:0;
        padding:0;
        background-image: url('https://api.imlazy.ink/img');
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
        font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif;
        display:flex;
        align-items:center;
        justify-content:center;
        height:100vh;
    }
    .overlay{
        position:fixed;
        inset:0;
        background:rgba(0,0,0,.5);
        display:flex;
        align-items:center;
        justify-content:center;
        z-index:999;
    }
    .modal{
        background:rgba(255, 255, 255, 0.5);
        backdrop-filter: blur(10px);
        border-radius:20px;
        padding:40px 48px;
        text-align:center;
        box-shadow:0 20px 40px rgba(0,0,0,.2);
        max-width:340px;
        width:90%;
        animation:fadeIn 0.5s ease-out;
    }
    @keyframes fadeIn {
        from {opacity:0; transform:translateY(-20px);}
        to {opacity:1; transform:translateY(0);}
    }
    .modal h2{
        margin:0 0 30px;
        font-size:24px;
        font-weight:600;
        color:#333;
        position:relative;
    }
    .modal h2:after {
        content:'';
        position:absolute;
        bottom:-10px;
        left:50%;
        transform:translateX(-50%);
        width:60px;
        height:3px;
        background:linear-gradient(90deg, #007aff, #5ac8fa);
        border-radius:3px;
    }
    .btn{
        display:flex;
        align-items:center;
        justify-content:center;
        gap:12px;
        width:100%;
        margin:16px 0;
        padding:14px 0;
        border:none;
        border-radius:12px;
        font-size:16px;
        font-weight:500;
        cursor:pointer;
        text-decoration:none;
        color:#fff;
        transition:all 0.3s ease;
        box-shadow:0 4px 10px rgba(0,0,0,0.1);
    }
    .ios   {background:linear-gradient(135deg, #007aff 0%, #5856d6 100%);}
    .win   {background:linear-gradient(135deg, #0078d4 0%, #00a2ed 100%);}
    .ios2  {background:linear-gradient(135deg, #34c759 0%, #30d158 100%);}
    .web   {background:linear-gradient(135deg, #5ac8fa 0%, #64d2ff 100%);}
    .btn:hover{
        transform:translateY(-3px);
        box-shadow:0 7px 14px rgba(0,0,0,0.15);
    }
    .btn:active{
        transform:translateY(0);
    }
    .btn i {
        font-size:18px;
    }
</style>
</head>
<body>

<!-- 弹窗 -->
<div class="overlay">
  <div class="modal">
      <h2>猫聊下载中心</h2>
      <div id="platform-recommendation" class="platform-info"></div>
      
      <div id="recommended-download"></div>
      
      <h3 id="other-versions" style="margin-top: 30px; margin-bottom: 15px; font-size: 18px; color: #555;">其他版本</h3>
      <div id="other-downloads"></div>
  </div>
</div>

<script>
// 检测设备类型并设置相应的背景图和下载推荐
function detectPlatformAndSetup() {
    // 定义平台检测正则表达式
    const isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);
    const isAndroid = /Android/i.test(navigator.userAgent);
    const isWindows = /Windows NT/i.test(navigator.userAgent);
    const isMacOS = /Macintosh/i.test(navigator.userAgent) && !isIOS;
    const isLinux = /Linux/i.test(navigator.userAgent) && !isAndroid;
    const isMobile = isIOS || isAndroid;
    
    // 设置背景图
    if (isMobile) {
        document.body.style.backgroundImage = "url('https://api.imlazy.ink/img-phone')";
    } else {
        document.body.style.backgroundImage = "url('https://api.imlazy.ink/img')";
    }
    
    // 创建所有下载按钮
    const allDownloads = {
        android: {
            name: "安卓版",
            icon: "fab fa-android",
            url: "android.html",
            class: "ios2",
            supported: isAndroid
        },
        windows: {
            name: "Windows 版",
            icon: "fab fa-windows",
            url: "windows.html",
            class: "win",
            supported: isWindows
        },
        webMain: {
            name: "网页版（ESA主线）",
            icon: "fas fa-globe",
            url: "https://web.chat.mikufans.xin",
            class: "web",
            supported: true // 浏览器版本总是支持的
        },
        webBackup: {
            name: "网页版（EO备线）",
            icon: "fas fa-globe",
            url: "https://web.chat-eo.mikufans.xin",
            class: "web",
            supported: true
        }
    };
    
    // 设置平台推荐信息
    const platformInfoElement = document.getElementById('platform-recommendation');
    const recommendedDownloadElement = document.getElementById('recommended-download');
    const otherDownloadsElement = document.getElementById('other-downloads');
    
    // 确定当前平台和推荐下载
    let currentPlatform = "未知设备";
    let supportStatus = "不支持";
    let recommendedApp = "webMain";
    
    if (isIOS) {
        currentPlatform = "iOS";
        supportStatus = "不支持";
        recommendedApp = "webMain";
    } else if (isAndroid) {
        currentPlatform = "安卓";
        supportStatus = "支持";
        recommendedApp = "android";
    } else if (isWindows) {
        currentPlatform = "Windows";
        supportStatus = "支持";
        recommendedApp = "windows";
    } else if (isMacOS) {
        currentPlatform = "macOS";
        supportStatus = "不支持";
        recommendedApp = "webMain";
    } else if (isLinux) {
        currentPlatform = "Linux";
        supportStatus = "不支持";
        recommendedApp = "webMain";
    }
    
    // 设置平台信息文本
    platformInfoElement.innerHTML = `当前你的平台 <strong>${currentPlatform}</strong> ${supportStatus}猫聊APP版本，推荐使用<strong>${allDownloads[recommendedApp].name}</strong>`;
    platformInfoElement.style.marginBottom = "25px";
    platformInfoElement.style.lineHeight = "1.5";
    platformInfoElement.style.color = "#333";
    
    // 添加推荐下载按钮
    const recommendedButton = createDownloadButton(allDownloads[recommendedApp]);
    recommendedDownloadElement.appendChild(recommendedButton);
    
    // 添加其他下载按钮
    for (const key in allDownloads) {
        if (key !== recommendedApp) {
            const button = createDownloadButton(allDownloads[key]);
            otherDownloadsElement.appendChild(button);
        }
    }
}

// 创建下载按钮
function createDownloadButton(downloadInfo) {
    const button = document.createElement('a');
    button.href = downloadInfo.url;
    button.className = `btn ${downloadInfo.class}`;
    
    const icon = document.createElement('i');
    icon.className = downloadInfo.icon;
    button.appendChild(icon);
    
    const text = document.createTextNode(` ${downloadInfo.name}`);
    button.appendChild(text);
    
    return button;
}

// 页面加载完成后执行
document.addEventListener('DOMContentLoaded', detectPlatformAndSetup);
</script>
</body>
</html>
